<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">
 <struts>
 <constant name="struts.devMode" value="true"></constant>
 <constant name="struts.ui.theme" value="simple"></constant><!-- 更改主题 -->
 <constant name="struts.ognl.allowStaticMethodAccess" value="true"></constant><!-- 开启静态方法调用 -->
 
 
 	<package name="p1" extends="struts-default">
 	<!-- 登陆 -->
		<action name="login" class="action.UserAction" method="login">
			<result>/login/home.jsp</result>
			<result name="input">/login/login.jsp</result>
		</action>
		<!-- 添加用户 -->
		<action name="addUser" class="action.UserAction" method="addUser">
		     <interceptor-ref name="defaultStack">
                    <param name="fileUpload.allowedExtensions">.doc,.docx</param><!-- 设置允许上传的文件扩展名 -->
             </interceptor-ref>
			<result>/user/list.jsp</result>
			<result name="input">/user/add.jsp</result>
		</action>
		<!-- 查找所有用户 -->
		<action name="findAll" class="action.UserAction" method="findAllUser">
			<result>/user/list.jsp</result>
		</action>
		<!-- 通过ID查找用户 -->
		<action name="findUserById" class="action.UserAction" method="findUserById">
			<result>/user/view.jsp</result>
		</action>
		<!-- 下载文件 -->
		<action name="download" class="action.UserAction" method="download">
			<result name="success" type="stream">
				<param name="inputName">inputStream</param>
				<!-- 设置编码和文件名 -->
				<param name="contentDisposition">attachment;filename=${@java.net.URLEncoder@encode(oldFileName,"UTF-8")}</param>
				<param name="contentType">application/octet-stream</param>
			</result>
		</action>
		<!-- 删除用户 -->
		<action name="deleteUserById" class="action.UserAction" method="deleteUserById">
			<result type="redirectAction">findAll</result><!-- 删除成功后重新获取数据 -->
		</action>
		
		<action name="editUser" class="action.UserAction" method="editUser"><!-- 用户编辑时回显数据 -->
			<result>/user/edit.jsp</result>
		</action>
		<action name="edit" class="action.UserAction" method="edit"><!-- 用户编辑后提交 -->
			<result name="input">/user/edit.jsp</result>
			<result type="redirectAction">findAll</result>
		</action>
 	</package>
 </struts>